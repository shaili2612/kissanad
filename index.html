<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kissan Rabbit Game</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #f0f8ff;
        overflow: hidden;
        font-family: Arial, sans-serif;
    }

    #game-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        background: #c4f7c4;
    }

    #rabbit {
        position: absolute;
        bottom: 50px;
        left: 80px;
        width: 90px;
        height: 90px;
        background: url('https://i.imgur.com/3R1cWzy.png') no-repeat center/contain;
    }

    #basket {
        position: absolute;
        width: 80px;
        height: 55px;
        background: url('https://i.imgur.com/1pZ3YRc.png') no-repeat center/contain;
        pointer-events: none;
    }

    .tomato {
        position: absolute;
        width: 55px;
        height: 55px;
        background: url('https://i.imgur.com/IS9PpTJ.png') no-repeat center/contain;
    }
</style>
</head>

<body>
<div id="game-container">
    <div id="rabbit"></div>
    <div id="basket"></div>
</div>

<script>
const rabbit = document.getElementById("rabbit");
const basket = document.getElementById("basket");
const container = document.getElementById("game-container");

let isJumping = false;
let velocity = 0;
let gravity = 0.45;
let rabbitBottom = 50;

// ----------------------------------------------
// JUMP FUNCTION
// ----------------------------------------------
function jump() {
    if (isJumping) return;
    isJumping = true;
    velocity = 10;

    // Make all tomatoes fly into basket on jump
    document.querySelectorAll(".tomato").forEach(t => collectTomato(t));
}

// ----------------------------------------------
// COLLECT TOMATO INTO BASKET
// ----------------------------------------------
function collectTomato(tomato) {
    tomato.style.transition = "all 0.7s ease";
    tomato.style.left = basket.offsetLeft + "px";
    tomato.style.top = (container.offsetHeight - 120) + "px";

    setTimeout(() => tomato.remove(), 700);
}

// ----------------------------------------------
// SPAWN TOMATOES
// ----------------------------------------------
function spawnTomato() {
    const tomato = document.createElement("div");
    tomato.classList.add("tomato");

    tomato.style.left = window.innerWidth + "px";
    tomato.style.top = (Math.random() * (window.innerHeight - 200)) + "px";

    container.appendChild(tomato);

    let interval = setInterval(() => {
        let x = parseInt(tomato.style.left);
        tomato.style.left = (x - 6) + "px";

        if (x < -80) {
            tomato.remove();
            clearInterval(interval);
        }
    }, 20);
}

setInterval(spawnTomato, 1200);

// ----------------------------------------------
// GAME LOOP
// ----------------------------------------------
function gameLoop() {
    if (isJumping) {
        rabbitBottom += velocity;
        velocity -= gravity;

        if (rabbitBottom <= 50) {
            rabbitBottom = 50;
            isJumping = false;
        }
    }

    rabbit.style.bottom = rabbitBottom + "px";

    // Basket follows rabbit
    basket.style.left = (rabbit.offsetLeft + 15) + "px";
    basket.style.bottom = (rabbitBottom - 20) + "px";

    requestAnimationFrame(gameLoop);
}

// ----------------------------------------------
// INPUT CONTROLS
// ----------------------------------------------
document.addEventListener("keydown", e => {
    if (e.code === "Space") jump();
});

document.addEventListener("click", jump);

// Start game loop
gameLoop();
</script>
</body>
</html>
